# Report2_02  

## 課題内容 - Contents
* 配列の和を求めるアセンブリ・プログラムを作成せよ
* レポートに以下を記述せよ  
    C言語版プログラムのリスト  
    完成したプログラムのリスト(コメントも記入)  
    プログラムの流れ図(PAD版等でもよい)  
    プログラムの説明(200文字以上)  
    実行結果、および、その実行結果の正しさの説明  

## C言語版プログラム
```c
#include <stdio.h>
int array[] = {1, 2, 4, 8, 16, 32, 64, 128};
int main(){
    int sum = 0;
    int *a = array;
    int i = 8;
    do {
        int x = *a;
        sum = sum + x;
        a++;
        i--;
    } while(i != 0);
    printf("%d", sum);
    return 0;
}
```

## 完成したプログラムのリスト
```s

        .data                                   # データセグメントにデータを配置することを示す
array:  .word   1, 2, 4, 8, 16, 32, 64, 128
        .text                                   # 以下の記述をテキストセグメントに配置
        .align 2                                # 4byte境界になるように調整する
        .globl main
main:
        move    $a0, $0                         # sum = 0
        la      $t0, array                      # a = array
        li      $t1, 8                          # i = 8
loop:
        lw      $t2, 0($t0)                     # x = *a
        addu    $a0, $a0, $t2                   # sum = sum + x
        addu    $t0, $t0, 4                     # a ++
        subu    $t1, $t1, 1                     # i --
        bne     $t1, $0, loop                   # do ... while (i != 0)
        li      $v0, 1                          # printf("%d", sum)
        syscall
        move    $v0, $0                         # 返り値を$v0に設定
        j       $ra                             # 呼び出し側に戻る
```

## プログラムの説明
```txt
ラベルarrayで配列を定義する。
ラベルmain以下に注目すると、
1行目で配列arrayの全要素の合計値が格納されるレジスタa0に初期値0を格納する。
2行目でレジスタt0に配列arrayの先頭要素のアドレスを格納する。
3行目でdo...whileループ処理のカウンターとして使われるレジスタt1に8を格納する。
上記の動作の後、ラベルloopに入る。ラベルloop以下では、
1行目で配列の全要素を1つずつ足し合わせる為のレジスタt2にレジスタt0のアドレスのメモリの内容を格納する。
2行目でレジスタa0の値とレジスタt2の値を加算してレジスタa0に格納する。
3行目でレジスタt0に4を加算し、配列の次の要素を示すようにする。
4行目でレジスタt1の値から1減算してレジスタt1に格納する。
5行目はdo...whileループ処理の最後で、レジスタt0の値が0と等しいか比較し、等しくなければラベルloopのアドレスへ分岐する
6行目でsyscallでint型を表示する為にレジスタv0に1を格納する。
7行目でレジスタa0の値を表示する。
8行目で返り値0をレジスタv0に設定する。
9行目で呼び出し側に戻る。
```
